(function(t){function a(a){for(var e,r,c=a[0],s=a[1],u=a[2],l=0,f=[];l<c.length;l++)r=c[l],i[r]&&f.push(i[r][0]),i[r]=0;for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e]);d&&d(a);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,a=0;a<o.length;a++){for(var n=o[a],e=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(e=!1)}e&&(o.splice(a--,1),t=r(r.s=n[0]))}return t}var e={},i={share:0},o=[];function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,a,n){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var e in t)r.d(n,e,function(a){return t[a]}.bind(null,e));return n},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=a,c=c.slice();for(var u=0;u<c.length;u++)a(c[u]);var d=s;o.push([1,"chunk-vendors"]),n()})({"087a":function(t,a,n){"use strict";var e=n("e6e5"),i=n.n(e);i.a},1:function(t,a,n){t.exports=n("2d1e")},2324:function(t,a,n){},"2d1e":function(t,a,n){"use strict";n.r(a);n("cadf"),n("551c"),n("097d");var e=n("2b0e"),i=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{attrs:{id:"app"}},[n("header-bar",{staticClass:"header-bar"}),n("transition",{attrs:{name:"fade"}},[n(t.currentComp,{tag:"component",attrs:{seller_id:t.seller_id,activity_id:t.activity_id,cut_id:t.currentCutId,wx_data:t.wx_data}})],1)],1)},o=[],r=n("6bde"),c=n("68d8"),s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"comp-bargain-detail"},[n("div",{staticClass:"comp-bargain-detail-banner"}),n("div",{staticClass:"comp-bargain-detail-container"},[n("div",{staticClass:"comp-bargain-detail-wrapper comp-bargain-detail-profile"},[n("div",{staticClass:"comp-bargain-detail-profile-avatar",style:{"background-image":"url("+t.wx_data.wx_head_img_url+")"}}),n("div",{staticClass:"comp-bargain-detail-profile-name"},[t._v(t._s(t.wx_data.wx_name))]),n("div",{staticClass:"comp-bargain-detail-profile-slogan"},[t._v("“我正在0元抢这个宝贝，快来帮我助攻”")]),n("div",{staticClass:"comp-bargain-detail-profile-info"},[n("div",{staticClass:"comp-bargain-detail-profile-info-image",style:{"background-image":"url("+t.goods_info.goods_img+")"}}),n("div",{staticClass:"comp-bargain-detail-profile-info-desc"},[n("div",[t._v(t._s(t.goods_info.coupon_title))]),n("strong",[n("i",{staticClass:"comp-bargain-detail-profile-icon-bargain"}),t._v("\n            ¥"+t._s(t.goods_info.goods_price)+"\n          ")])])])]),n("div",{staticClass:"comp-bargain-detail-wrapper comp-bargain-detail-action"},[n("div",{staticClass:"comp-bargain-detail-action-timer"},[t._v("\n        距结束还剩："),n("comp-timer",{attrs:{end_time:t.activity_info.end_time}})],1),n("div",{staticClass:"comp-bargain-detail-action-status"},[t.cut_info.is_finish?n("span",[t._v("砍价已结束")]):n("span",[t._v("砍价进行中")])]),n("div",{staticClass:"comp-bargain-detail-action-money"},[t._v("\n        已砍："),n("strong",[t._v(t._s(t.cut_info.already_cut_num))]),t._v("元，还剩："),n("strong",[t._v(t._s(t.goods_info.goods_price-t.cut_info.already_cut_num))]),t._v("元\n      ")]),n("div",{staticClass:"comp-bargain-detail-action-progress"},[n("comp-progress",{attrs:{full:t.goods_info.goods_price,curr:t.cut_info.already_cut_num}})],1),n("div",{staticClass:"comp-bargain-detail-action-btn"},[n("button",{staticClass:"primate-btn",on:{click:t.submit}},[t._v("帮TA砍一刀")]),n("button",{staticClass:"primate-btn",on:{click:t.gotoIndex}},[t._v("这个好玩，我也要砍")])])]),n("div",{staticClass:"comp-bargain-detail-wrapper comp-bargain-detail-ranking"},[t._m(0),t.cut_ranking.length?n("div",{staticClass:"comp-bargain-detail-ranking-list"},t._l(t.cut_ranking,function(a,e){return n("div",{key:e,staticClass:"comp-bargain-detail-ranking-item"},[n("div",{staticClass:"comp-bargain-detail-ranking-item-avatar",style:{"background-image":"url("+a.wx_head_img_url+")"}}),n("div",{staticClass:"comp-bargain-detail-ranking-item-name"},[n("div",[t._v(t._s(a.wx_name))]),n("span",[t._v(t._s(t._f("formatDate")(a.time||Date.now())))])]),n("div",{staticClass:"comp-bargain-detail-ranking-item-money"},[t._v(t._s(a.money||0)+"元")])])})):n("div",{staticClass:"comp-bargain-detail-ranking-empty"},[t._v("暂无数据")])])])])},u=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"comp-bargain-detail-ranking-title"},[n("span",[t._v("砍价榜")])])}],d=(n("386d"),n("956b")),l=n("d1ca"),f={name:"compBargainDetail",components:{compTimer:d["a"],compProgress:l["a"]},props:{cut_id:"",seller_id:"",wx_data:{type:Object,default:function(){return{}}}},filters:{formatDate:function(t){function a(t){return t>=10?t:"0".concat(t)}var n=new Date(t),e=a(n.getMonth()+1),i=a(n.getDate()),o=a(n.getHours()),r=a(n.getMinutes()),c=a(n.getSeconds());return"".concat(e,"/").concat(i," ").concat(o,":").concat(r,":").concat(c)}},data:function(){return{activity_info:{},goods_info:{},cut_info:{},cut_ranking:[]}},methods:{getCutInfo:function(){var t=this;this.$store.dispatch("product/getCutInfo",this.cut_id).then(function(a){"object"===Object(r["a"])(a.activity_info)&&(t.activity_info=a.activity_info),"object"===Object(r["a"])(a.goods_info)&&(t.goods_info=a.goods_info),"object"===Object(r["a"])(a.cut_info)&&(t.cut_info=a.cut_info)}).catch(function(t){console.log(t)})},getCutVisitor:function(){var t=this;this.$store.dispatch("product/getCutVisitor",this.cut_id).then(function(a){t.cut_ranking=a}).catch(function(t){console.log(t)})},submit:function(){this.$store.dispatch("product/cut",{cut_id:this.cut_id,wx_openid:this.wx_data.wx_openid,wx_name:this.wx_data.wx_name,wx_head_img_url:this.wx_data.wx_head_img_url,seller_id:this.seller_id}).then(function(t){console.log(t);try{0!==t.code?alert(t.data.msg):alert("砍价成功！")}catch(t){console.log(t)}}).catch(function(t){console.log(t)})},gotoIndex:function(){window.location.href=window.location.path+window.location.search}},created:function(){this.getCutInfo(),this.getCutVisitor()}},_=f,m=(n("c0a2"),n("2877")),p=Object(m["a"])(_,s,u,!1,null,null,null);p.options.__file="index.vue";var g=p.exports,v=n("ed08"),h={name:"app",components:{headerBar:c["a"],compBargainDetail:g},data:function(){return{currentComp:"compBargainDetail",currentCutId:v["a"].getParam("cut_id"),seller_id:v["a"].getParam("seller_id"),activity_id:v["a"].getParam("activity_id"),wx_data:{wx_name:"飞行家",wx_openid:"test",wx_head_img_url:"https://puui.qpic.cn/tv/0/37883357/0"}}},mounted:function(){var t=window.wx_result;"object"===Object(r["a"])(t)&&(this.wx_data.wx_name=t.nickname,this.wx_data.wx_openid=t.openid,this.wx_data.wx_head_img_url=t.headimgurl)}},b=h,w=(n("9859"),Object(m["a"])(b,i,o,!1,null,null,null));w.options.__file="index.vue";var x=w.exports,S=n("4360");e["a"].config.productionTip=!1,new e["a"]({store:S["a"],render:function(t){return t(x)}}).$mount("#app")},4360:function(t,a,n){"use strict";n("cadf"),n("551c"),n("097d");var e=n("2b0e"),i=n("f2de"),o=n("bc3a"),r=n.n(o),c=r.a.create({timeout:1e4});c.interceptors.request.use(function(t){return t},function(t){Promise.reject(t)});var s=c,u=n("ed08"),d="http://horse-activity.chebaba.com",l={namespaced:!0,state:{userid:u["a"].getStorage("userid"),token:u["a"].getStorage("token")},mutations:{SET_USERID:function(t,a){t.userid=a,u["a"].setStorage("userid",a)},SET_TOKEN:function(t,a){t.token=a,u["a"].setStorage("token",a)}},actions:{adduser:function(t){var a=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(t,e){s({url:"".concat(d,"/wangxun/api_adduser"),method:"get",params:n}).then(function(n){n.data&&0===n.data.code&&n.data.data&&n.data.data.token?(a("SET_USERID",n.data.data.userid),a("SET_TOKEN",n.data.data.token),t(n.data.data)):e(n)}).catch(function(t){return e(t)})})},sendPhoneCode:function(t,a){return new Promise(function(t,n){s({url:"".concat(d,"/wangxun/thirdApi_sendSmsCode?mobile=").concat(a),method:"get"}).then(function(a){a.data&&0===a.data.code?t(a.data):n(a)}).catch(function(t){return n(t)})})}}},f=l,_="http://horse-activity.chebaba.com",m={namespaced:!0,state:{carSeries:[],sellerGoods:[]},mutations:{SET_CAR_SERIES:function(t,a){t.carSeries=a},SET_SELLER_GOODS:function(t,a){t.sellerGoods=a}},actions:{getCarSeries:function(t){var a=t.commit;return new Promise(function(t,n){s({url:"".concat(_,"/wangxun/api_getSeries"),method:"get"}).then(function(e){e.data&&0===e.data.code&&Array.isArray(e.data.data)?(a("SET_CAR_SERIES",e.data.data),t(e.data.data)):n(e)}).catch(function(t){return n(t)})})},getSellerGoods:function(t,a){var n=t.commit;return new Promise(function(t,e){s({url:"".concat(_,"/wangxun/api_getAllSellerGoods"),method:"get",params:a}).then(function(a){a.data&&0===a.data.code&&Array.isArray(a.data.data)?(n("SET_SELLER_GOODS",a.data.data),t(a.data.data)):e(a)}).catch(function(t){return e(t)})})},addGoodsToCut:function(t,a){return new Promise(function(t,n){s({url:"".concat(_,"/wangxun/api_getaddGoodsToCut"),method:"get",params:a}).then(function(a){a.data&&0===a.data.code&&a.data.data&&a.data.data.cut_id?t(a.data.data.cut_id):n(a)}).catch(function(t){return n(t)})})},getCutInfo:function(t,a){return new Promise(function(t,n){s({url:"".concat(_,"/wangxun/api_getCutInfo?cut_id=").concat(a),method:"get"}).then(function(a){a.data&&0===a.data.code&&a.data.data?t(a.data.data):n(a)}).catch(function(t){return n(t)})})},getCutVisitor:function(t,a){return new Promise(function(t,n){s({url:"".concat(_,"/wangxun/api_getCutVisitor?cut_id=").concat(a),method:"get"}).then(function(a){a.data&&0===a.data.code&&a.data.data&&Array.isArray(a.data.data.visitor_cut_list)?t(a.data.data.visitor_cut_list):n(a)}).catch(function(t){return n(t)})})},cut:function(t,a){return new Promise(function(t,n){s({url:"".concat(_,"/wangxun/api_cut"),method:"get",params:a}).then(function(a){a.data&&0===a.data.code?t(a.data):n(a)}).catch(function(t){return n(t)})})}}},p=m,g="http://horse-activity.chebaba.com",v={namespaced:!0,state:{share_info:{}},mutations:{SET_SHARE_INFO:function(t,a){t.share_info=a}},actions:{getWxShareInfo:function(t,a){var n=t.commit;return new Promise(function(t,e){s({url:"".concat(g,"/wangxun/api_getShareInfo?http_referer=").concat(a),method:"get"}).then(function(a){a.data?(n("SET_SHARE_INFO",a.data),t(a.data)):e(a)}).catch(function(t){return e(t)})})}}},h=v;e["a"].use(i["a"]);var b=new i["a"].Store({modules:{user:f,product:p,wx:h}});a["a"]=b},4950:function(t,a,n){},"4daa":function(t,a,n){"use strict";var e=n("520d"),i=n.n(e);i.a},"520d":function(t,a,n){},"68d8":function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"header"})},i=[],o={name:"headerBar"},r=o,c=(n("087a"),n("2877")),s=Object(c["a"])(r,e,i,!1,null,"0cc87d72",null);s.options.__file="index.vue";a["a"]=s.exports},"956b":function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("span",{staticClass:"comp-timer"},[n("span",[t._v(t._s(t.hour))]),t._v(" : "),n("span",[t._v(t._s(t.minute))]),t._v(" : "),n("span",[t._v(t._s(t.second))])])},i=[],o=(n("c5f6"),n("cadf"),n("551c"),n("097d"),{name:"compTimer",props:{end_time:Number},data:function(){return{rest_time:0,countdown_timer:null,hour:"00",minute:"00",second:"00"}},methods:{countdown:function(){var t=this;this.countdown_timer=setInterval(function(){t.rest_time-=1,t.rest_time<=0?clearInterval(t.countdown_timer):t.update()},1e3)},setRestTime:function(){var t=this.end_time-Date.now()/1e3>>0;this.rest_time=t>0?t:0},update:function(){function t(t){return t>=10?t:"0".concat(t)}var a=this.rest_time,n=a/3600>>0,e=a%3600/60>>0,i=a%3600%60>>0;this.hour=t(n),this.minute=t(e),this.second=t(i)}},mounted:function(){this.setRestTime(),this.countdown()}}),r=o,c=(n("4daa"),n("2877")),s=Object(c["a"])(r,e,i,!1,null,null,null);s.options.__file="timer.vue";a["a"]=s.exports},"97f0":function(t,a,n){},9859:function(t,a,n){"use strict";var e=n("4950"),i=n.n(e);i.a},c0a2:function(t,a,n){"use strict";var e=n("2324"),i=n.n(e);i.a},d1ca:function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("span",{staticClass:"comp-progress"},[n("div",{staticClass:"comp-progress-full"},[n("div",{staticClass:"comp-progress-curr",style:{width:t.percentage+"%"}})])])},i=[],o=(n("c5f6"),{name:"compProgress",props:{full:Number,curr:Number},computed:{percentage:function(){return this.curr/this.full*100}}}),r=o,c=(n("fbf1"),n("2877")),s=Object(c["a"])(r,e,i,!1,null,null,null);s.options.__file="progress.vue";a["a"]=s.exports},e6e5:function(t,a,n){},ed08:function(t,a,n){"use strict";n("6b54"),n("3b2b"),n("a481");a["a"]={getParam:function(t,a){if("string"!==typeof t)return!1;a||(a=window.location.href),t=t.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),e=n.exec(a);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},clone:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.parse(JSON.stringify(t))},getDay:function(t){return new Date(t).getDay()},setStorage:function(t,a){var n={val:a};n=JSON.stringify(n),t=t.toString(),window.localStorage.setItem(t,n)},getStorage:function(t){t=t.toString();var a=window.localStorage.getItem(t);return a&&(a=JSON.parse(a),a=a.val),a},removeStorage:function(t){t=t.toString(),window.localStorage.removeItem(t)},clearStorage:function(){window.localStorage.clear()}}},fbf1:function(t,a,n){"use strict";var e=n("97f0"),i=n.n(e);i.a}});
//# sourceMappingURL=share.dfb4208d.js.map